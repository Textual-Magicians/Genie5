<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
        x:Class="GenieClient.Views.MainWindow"
        Title="Genie 5"
        Width="1200" Height="800"
        MinWidth="800" MinHeight="600"
        WindowStartupLocation="CenterScreen"
        Background="#1a1a2e">

    <Window.Styles>
        <Style Selector="TextBox.CommandInput">
            <Setter Property="Background" Value="#16213e"/>
            <Setter Property="Foreground" Value="#e0e0e0"/>
            <Setter Property="BorderBrush" Value="#0f3460"/>
            <Setter Property="FontFamily" Value="Cascadia Mono, Consolas, monospace"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="8"/>
        </Style>
    </Window.Styles>

    <Grid RowDefinitions="Auto,*,Auto,Auto,Auto,Auto">
        <!-- Menu Bar -->
        <Menu Grid.Row="0" Background="#16213e">
            <MenuItem Header="_File">
                <MenuItem Header="_Connect..." Click="OnConnect"/>
                <MenuItem Header="_Disconnect" Click="OnDisconnect"/>
                <Separator/>
                <MenuItem Header="E_xit" Click="OnExit"/>
            </MenuItem>
            <MenuItem Header="_Edit">
                <MenuItem Header="_Preferences..."/>
            </MenuItem>
            <MenuItem Header="_Scripts">
                <MenuItem Header="_Script Manager..."/>
            </MenuItem>
            <MenuItem Header="_Help">
                <MenuItem Header="_About Genie 5"/>
            </MenuItem>
        </Menu>

        <!-- Game Text Output -->
        <Border Grid.Row="1" Margin="8,8,8,4" CornerRadius="8" ClipToBounds="True">
            <ScrollViewer x:Name="OutputScroller" 
                          HorizontalScrollBarVisibility="Disabled"
                          VerticalScrollBarVisibility="Auto">
                <SelectableTextBlock x:Name="GameOutput"
                                     Background="#0d1117"
                                     Foreground="#c9d1d9"
                                     FontFamily="Cascadia Mono, Consolas, monospace"
                                     FontSize="13"
                                     Padding="12"
                                     TextWrapping="Wrap"
                                     Text="Welcome to Genie 5 - Cross-Platform Edition&#x0a;&#x0a;Use File → Connect to connect to a game server.&#x0a;"/>
            </ScrollViewer>
        </Border>

        <!-- Command Input -->
        <Border Grid.Row="2" Margin="8,4,8,4" CornerRadius="8" ClipToBounds="True">
            <TextBox x:Name="CommandInput" 
                     Classes="CommandInput"
                     Watermark="Enter command..."
                     KeyDown="OnCommandKeyDown"/>
        </Border>

        <!-- Row 1: RT | Compass | Status Effects | Left Hand | Right Hand | Prepared Spell -->
        <Border Grid.Row="3" Margin="8,4,8,2" Background="#16213e" CornerRadius="8" Padding="8,6">
            <StackPanel Orientation="Horizontal" Spacing="8">
                <!-- Roundtime with progress bar background -->
                <Border Background="#2a2a3e" CornerRadius="6" 
                        VerticalAlignment="Center" Width="70" Height="32" ClipToBounds="True">
                    <Grid>
                        <!-- Progress bar background (fills from left based on RT) -->
                        <Border x:Name="RoundtimeBar" Background="#7f1d1d" 
                                CornerRadius="6" HorizontalAlignment="Left" Width="0"/>
                        <!-- Text overlay -->
                        <StackPanel Orientation="Horizontal" Spacing="4" 
                                    HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="RT" Foreground="#888" FontSize="10" VerticalAlignment="Center"/>
                            <TextBlock x:Name="RoundtimeText" Text="0" 
                                       FontSize="14" FontWeight="Bold" Foreground="#ef4444"
                                       VerticalAlignment="Center" MinWidth="16" TextAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Compass - compact horizontal layout -->
                <Border Background="#2a2a3e" CornerRadius="6" 
                        Padding="6,4" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <!-- Cardinal directions grid -->
                        <Grid Width="44" Height="32">
                            <!-- Row 1: NW N NE -->
                            <TextBlock x:Name="CompassNW" Text="↖" FontSize="9" Foreground="#444"
                                       HorizontalAlignment="Left" VerticalAlignment="Top"/>
                            <TextBlock x:Name="CompassN" Text="N" FontSize="10" Foreground="#666" FontWeight="Bold"
                                       HorizontalAlignment="Center" VerticalAlignment="Top"/>
                            <TextBlock x:Name="CompassNE" Text="↗" FontSize="9" Foreground="#444"
                                       HorizontalAlignment="Right" VerticalAlignment="Top"/>
                            <!-- Row 2: W O E -->
                            <TextBlock x:Name="CompassW" Text="W" FontSize="10" Foreground="#666" FontWeight="Bold"
                                       HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <TextBlock x:Name="CompassOut" Text="○" FontSize="9" Foreground="#444"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            <TextBlock x:Name="CompassE" Text="E" FontSize="10" Foreground="#666" FontWeight="Bold"
                                       HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            <!-- Row 3: SW S SE -->
                            <TextBlock x:Name="CompassSW" Text="↙" FontSize="9" Foreground="#444"
                                       HorizontalAlignment="Left" VerticalAlignment="Bottom"/>
                            <TextBlock x:Name="CompassS" Text="S" FontSize="10" Foreground="#666" FontWeight="Bold"
                                       HorizontalAlignment="Center" VerticalAlignment="Bottom"/>
                            <TextBlock x:Name="CompassSE" Text="↘" FontSize="9" Foreground="#444"
                                       HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                        </Grid>
                        <!-- Vertical separator -->
                        <Border Width="1" Background="#444" Margin="2,2"/>
                        <!-- Up/Down column -->
                        <StackPanel VerticalAlignment="Center" Spacing="2">
                            <TextBlock x:Name="CompassUp" Text="▲" FontSize="10" Foreground="#444"
                                       HorizontalAlignment="Center"/>
                            <TextBlock x:Name="CompassDown" Text="▼" FontSize="10" Foreground="#444"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Status Effects -->
                <StackPanel Orientation="Horizontal" Spacing="6" 
                            VerticalAlignment="Center">
                    <Border x:Name="StatusHidden" Background="#4a4a5e" CornerRadius="4" 
                            Padding="8,4" IsVisible="False">
                        <TextBlock Text="Hidden" FontSize="10" Foreground="#a0a0a0"/>
                    </Border>
                    <Border x:Name="StatusInvisible" Background="#4a4a5e" CornerRadius="4" 
                            Padding="8,4" IsVisible="False">
                        <TextBlock Text="Invisible" FontSize="10" Foreground="#a0a0a0"/>
                    </Border>
                    <Border x:Name="StatusJoined" Background="#3b5e3b" CornerRadius="4" 
                            Padding="8,4" IsVisible="False">
                        <TextBlock Text="Joined" FontSize="10" Foreground="#90c090"/>
                    </Border>
                    <Border x:Name="StatusWebbed" Background="#5e4a3b" CornerRadius="4" 
                            Padding="8,4" IsVisible="False">
                        <TextBlock Text="Webbed" FontSize="10" Foreground="#c0a080"/>
                    </Border>
                    <Border x:Name="StatusStunned" Background="#5e3b3b" CornerRadius="4" 
                            Padding="8,4" IsVisible="False">
                        <TextBlock Text="Stunned" FontSize="10" Foreground="#c08080"/>
                    </Border>
                    <Border x:Name="StatusBleeding" Background="#5e2a2a" CornerRadius="4" 
                            Padding="8,4" IsVisible="False">
                        <TextBlock Text="Bleeding" FontSize="10" Foreground="#ff6060"/>
                    </Border>
                </StackPanel>

                <!-- Left Hand -->
                <Border Background="#2a2a3e" CornerRadius="6" 
                        Padding="8,4" VerticalAlignment="Center" MinWidth="100">
                    <StackPanel>
                        <TextBlock Text="Left" FontSize="9" Foreground="#666"/>
                        <TextBlock x:Name="LeftHandText" Text="Empty" FontSize="11" Foreground="#a0a0a0"/>
                    </StackPanel>
                </Border>

                <!-- Right Hand -->
                <Border Background="#2a2a3e" CornerRadius="6" 
                        Padding="8,4" VerticalAlignment="Center" MinWidth="100">
                    <StackPanel>
                        <TextBlock Text="Right" FontSize="9" Foreground="#666"/>
                        <TextBlock x:Name="RightHandText" Text="Empty" FontSize="11" Foreground="#a0a0a0"/>
                    </StackPanel>
                </Border>

                <!-- Prepared Spell -->
                <Border Background="#2a2a3e" CornerRadius="6" 
                        Padding="8,4" VerticalAlignment="Center" MinWidth="120">
                    <StackPanel>
                        <TextBlock Text="Spell" FontSize="9" Foreground="#666"/>
                        <TextBlock x:Name="PreparedSpellText" Text="None" FontSize="11" Foreground="#a855f7"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>

        <!-- Row 2: Health | Mana | Concentration | Stamina | Spirit -->
        <Border Grid.Row="4" Margin="8,2,8,4" Background="#16213e" CornerRadius="8" Padding="12,8">
            <Grid ColumnDefinitions="*,*,*,*,*">
                <!-- Health Bar - Red -->
                <StackPanel Grid.Column="0" Spacing="2" Margin="0,0,8,0">
                    <Grid ColumnDefinitions="Auto,*">
                        <TextBlock Text="Health" Foreground="#888" FontSize="10" VerticalAlignment="Center"/>
                        <TextBlock Grid.Column="1" x:Name="HealthText" Text="100%" 
                                   Foreground="#ef4444" FontSize="10" 
                                   HorizontalAlignment="Right" VerticalAlignment="Center"/>
                    </Grid>
                    <Grid Height="16">
                        <Border Background="#2a2a3e" CornerRadius="3"/>
                        <Border x:Name="HealthBar" Background="#ef4444" 
                                CornerRadius="3" HorizontalAlignment="Stretch"/>
                    </Grid>
                </StackPanel>

                <!-- Mana Bar - Blue -->
                <StackPanel Grid.Column="1" Spacing="2" Margin="8,0">
                    <Grid ColumnDefinitions="Auto,*">
                        <TextBlock Text="Mana" Foreground="#888" FontSize="10" VerticalAlignment="Center"/>
                        <TextBlock Grid.Column="1" x:Name="ManaText" Text="100%" 
                                   Foreground="#3b82f6" FontSize="10" 
                                   HorizontalAlignment="Right" VerticalAlignment="Center"/>
                    </Grid>
                    <Grid Height="16">
                        <Border Background="#2a2a3e" CornerRadius="3"/>
                        <Border x:Name="ManaBar" Background="#3b82f6" 
                                CornerRadius="3" HorizontalAlignment="Stretch"/>
                    </Grid>
                </StackPanel>

                <!-- Concentration Bar - Cyan -->
                <StackPanel Grid.Column="2" Spacing="2" Margin="8,0">
                    <Grid ColumnDefinitions="Auto,*">
                        <TextBlock Text="Conc" Foreground="#888" FontSize="10" VerticalAlignment="Center"/>
                        <TextBlock Grid.Column="1" x:Name="ConcentrationText" Text="100%" 
                                   Foreground="#22d3ee" FontSize="10" 
                                   HorizontalAlignment="Right" VerticalAlignment="Center"/>
                    </Grid>
                    <Grid Height="16">
                        <Border Background="#2a2a3e" CornerRadius="3"/>
                        <Border x:Name="ConcentrationBar" Background="#22d3ee" 
                                CornerRadius="3" HorizontalAlignment="Stretch"/>
                    </Grid>
                </StackPanel>

                <!-- Stamina Bar - Green -->
                <StackPanel Grid.Column="3" Spacing="2" Margin="8,0">
                    <Grid ColumnDefinitions="Auto,*">
                        <TextBlock Text="Stamina" Foreground="#888" FontSize="10" VerticalAlignment="Center"/>
                        <TextBlock Grid.Column="1" x:Name="StaminaText" Text="100%" 
                                   Foreground="#22c55e" FontSize="10" 
                                   HorizontalAlignment="Right" VerticalAlignment="Center"/>
                    </Grid>
                    <Grid Height="16">
                        <Border Background="#2a2a3e" CornerRadius="3"/>
                        <Border x:Name="StaminaBar" Background="#22c55e" 
                                CornerRadius="3" HorizontalAlignment="Stretch"/>
                    </Grid>
                </StackPanel>

                <!-- Spirit Bar - Magenta -->
                <StackPanel Grid.Column="4" Spacing="2" Margin="8,0,0,0">
                    <Grid ColumnDefinitions="Auto,*">
                        <TextBlock Text="Spirit" Foreground="#888" FontSize="10" VerticalAlignment="Center"/>
                        <TextBlock Grid.Column="1" x:Name="SpiritText" Text="100%" 
                                   Foreground="#e879f9" FontSize="10" 
                                   HorizontalAlignment="Right" VerticalAlignment="Center"/>
                    </Grid>
                    <Grid Height="16">
                        <Border Background="#2a2a3e" CornerRadius="3"/>
                        <Border x:Name="SpiritBar" Background="#e879f9" 
                                CornerRadius="3" HorizontalAlignment="Stretch"/>
                    </Grid>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Status Bar -->
        <Border Grid.Row="5" Background="#16213e" Padding="8,4">
            <Grid ColumnDefinitions="*,Auto,Auto">
                <TextBlock x:Name="StatusText" Text="Disconnected" 
                           Foreground="#888" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="1" x:Name="ConnectionStatus" 
                           Text="●" Foreground="#ef4444" FontSize="12" 
                           VerticalAlignment="Center" Margin="8,0"/>
                <TextBlock Grid.Column="2" Text="Genie 5.0.0" 
                           Foreground="#666" VerticalAlignment="Center"/>
            </Grid>
        </Border>
    </Grid>
</Window>
